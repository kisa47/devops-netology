# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

### Ответ

- **Электронные чеки в json виде** - документоориентированная NoSQL СУБД, например MongoDB;
- **Склады и автомобильные дороги для логистической компании** - графовая NoSQL СУБД, например GraphQL;
- **Генеалогические деревья** - сетевая (NoSQL) СУБД;
- **Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации** - ключ-значение NoSQL СУБД, например redis;
- **Отношения клиент-покупка для интернет-магазина** - реляционная (SQL) СУБД.

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

### Ответ

согласно CAP-теореме:

- **Данные записываются на все узлы с задержкой до часа (асинхронная запись)** - AP, нет согласованности (асинхронность);
- **При сетевых сбоях, система может разделиться на 2 раздельных кластера** - AP, при разделении на 2 раздельных кластера нет согласованности, согласно PA/EC;
- **Система может не прислать корректный ответ или сбросить соединение** - PC, так как согласно условию система может не дать ответ, но не может дать некорректный ответ, значит система не может в **Availability**, при которой ответ был бы всегда. 

огласно PACELC-теореме:

- **Данные записываются на все узлы с задержкой до часа (асинхронная запись)** - PA/EL, так как жертвуется скорость согласованности;
- **При сетевых сбоях, система может разделиться на 2 раздельных кластера** - PA/EC, так как при аварии жертвуется согласованность.
- **Система может не прислать корректный ответ или сбросить соединение** - PC/EC, так как в жертву приносится доступность.

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

### Ответ

Нет, так как это противоположные принципы построения (BASE - производительность важнее доступности, ACID согласованность важнее доступности).

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

### Ответ

Redis.

Плюсы:

- Высокая производительность (скорость обработки запросов);
- Не требует места на диске, все в RAM (кроме некоторых случаев);
- Поддерживает репликацию (с перенаправлением запросов);
- Создание резервных копий (снапшотов) на диске;
- Открытое ПО.

Минусы:

- При отсутствии репликации и резервного копирования (снапшотов) риск потерять данные;
- Может занимать большой объем RAM;

---

### Как cдавать задание

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---